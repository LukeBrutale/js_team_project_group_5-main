{"version":3,"sources":["js/library/watched-movie.js"],"names":["API_KEY","BASE_URL","refs","gallery","document","querySelector","getWatched","clearGallery","watchedMovieListId","JSON","parse","localStorage","getItem","innerHTML","div","createElement","image","setAttribute","appendChild","style","borderRadius","getElementById","forEach","id","fetch","then","r","json","movieInfo","releaseDate","release_date","slice","backdrop_path","insertAdjacentHTML","title","genres","name","vote_average","length","poster_path"],"mappings":";AAqKC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EArKD,MAAMA,EAAU,mCACVC,EAAW,+BAEXC,EAAO,CACXC,QAASC,SAASC,cAAc,aAGnB,SAASC,IACtBC,IAEMC,MAAAA,EAAqBC,KAAKC,MAAMC,aAAaC,QAAQ,YAEvDJ,GAAuB,OAAvBA,GAAmE,OAApCG,aAAaC,QAAQ,WAAqB,CAC3EV,EAAKC,QAAQU,UAAa,yIAKtBC,IAAAA,EAAMV,SAASW,cAAc,OAC7BC,EAAQZ,SAASW,cAAc,OAEnCC,EAAMC,aACJ,MACA,2EAGFH,EAAII,YAAYF,GAAOG,MAAMC,aAAe,OAC5ChB,SAASiB,eAAe,SAASH,YAAYJ,QAE7CN,EAAmBc,QAAQ,SAAyBC,GAClDC,SAASvB,WAAkBsB,aAAcvB,KAAWyB,KAAKC,GACvDA,EAAEC,OAAOF,KAAKG,IAGNC,MAAAA,EAAcD,EAAUE,aAAaC,MAAM,EAAG,GA0H7CH,OAxHyB,OAA5BA,EAAUI,eACZ9B,EAAKC,QAAQ8B,mBACX,kGAGyDL,EAAUL,WAAWK,EAAUL,cAAcK,EAAUM,6SAMnGN,EAAUM,wCACNN,EAAUL,mPAOIK,EAAUM,iFAEbN,EAAUO,OAAO,GAAGC,UAAUP,2DACjBD,EAAUS,oIASnDT,EAAUO,OAAOG,OAAS,EAC5BpC,EAAKC,QAAQ8B,mBACX,kGAGyDL,EAAUL,WAAWK,EAAUL,cAAcK,EAAUM,qOAKpEN,EAAUW,0CACzCX,EAAUM,wCACNN,EAAUL,mPAOIK,EAAUM,iFAEbN,EAAUO,OAAO,GAAGC,SAASR,EAAUO,OAAO,GAAGC,iBAAiBP,2DACrDD,EAAUS,qIAO3CT,EAAUO,OAAOG,OAAS,GACpCpC,EAAKC,QAAQ8B,mBACX,kGAGyDL,EAAUL,WAAWK,EAAUL,cAAcK,EAAUM,qOAKpEN,EAAUW,0CACzCX,EAAUM,wCACNN,EAAUL,mPAOIK,EAAUM,iFAEbN,EAAUO,OAAO,GAAGC,iBAAiBP,2DACxBD,EAAUS,qIAO3CT,EAAUO,OAAOG,OAAS,IACpCpC,EAAKC,QAAQ8B,mBACX,kGAGyDL,EAAUL,WAAWK,EAAUL,cAAcK,EAAUM,qOAKpEN,EAAUW,0CACzCX,EAAUM,wCACNN,EAAUL,mPAOIK,EAAUM,iFAEbN,EAAUO,OAAO,GAAGC,UAAUP,2DACjBD,EAAUS,oIAShDT,OAOjB,SAASrB,IACPL,EAAKC,QAAQU,UAAY","file":"watched-movie.dbdc4b53.js","sourceRoot":"..\\src","sourcesContent":["const API_KEY = '838a1c7309b989baab596bfe84b6d2d8';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\nconst refs = {\r\n  gallery: document.querySelector('.gallery'),\r\n};\r\n\r\nexport default function getWatched() {\r\n  clearGallery();\r\n\r\n  const watchedMovieListId = JSON.parse(localStorage.getItem('watched'));\r\n\r\n  if (watchedMovieListId === null || localStorage.getItem('watched') === '[]') {\r\n    refs.gallery.innerHTML = ` <div class=\"container-empty\" id=\"block\">\r\n         <p class=\"info-text__library\"> Your library is empty.</p>\r\n      </div>\r\n         `;\r\n\r\n    var div = document.createElement('div');\r\n    var image = document.createElement('img');\r\n\r\n    image.setAttribute(\r\n      'src',\r\n      'https://cdn.pixabay.com/photo/2012/11/05/07/39/projector-64149_1280.jpg',\r\n    );\r\n\r\n    div.appendChild(image).style.borderRadius = '10px';\r\n    document.getElementById('block').appendChild(div);\r\n  } else {\r\n    watchedMovieListId.forEach(function fetchMovieById2(id) {\r\n      fetch(`${BASE_URL}/movie/${id}?api_key=${API_KEY}`).then(r =>\r\n        r.json().then(movieInfo => {\r\n          // console.log(movieInfo.genres.length);\r\n\r\n          const releaseDate = movieInfo.release_date.slice(0, 4);\r\n\r\n          if (movieInfo.backdrop_path === null) {\r\n            refs.gallery.insertAdjacentHTML(\r\n              'beforeend',\r\n              `\r\n          \r\n          <li class='wow animate__fadeInUp card__item list' data-id='${movieInfo.id}' id='${movieInfo.id}' title='${movieInfo.title}'>\r\n            <article class='card'>\r\n              <a href='' class='card__link link'>\r\n                <div class='card-img-container'>\r\n                  <img\r\n                    src='https://martialartsplusinc.com/wp-content/uploads/2017/04/default-image.jpg'\r\n                    alt='${movieInfo.title}'\r\n                    data-id='${movieInfo.id}'\r\n                    class='card__image'\r\n                  />\r\n                </div>\r\n\r\n                <div class='card__description'>\r\n                  <div class='card-name__container'>\r\n                    <h2 class='card__name'>${movieInfo.title}</h2>\r\n                  </div>\r\n                  <p class='card__info'>${movieInfo.genres[0].name} | ${releaseDate}\r\n                    <span class='card__movie-rating'>${movieInfo.vote_average}</span>\r\n                  </p>\r\n                </div>\r\n              </a>\r\n            </article>\r\n          </li>`,\r\n            );\r\n          }\r\n\r\n          if (movieInfo.genres.length > 3) {\r\n            refs.gallery.insertAdjacentHTML(\r\n              'beforeend',\r\n              `\r\n          \r\n          <li class='wow animate__fadeInUp card__item list' data-id='${movieInfo.id}' id='${movieInfo.id}' title='${movieInfo.title}'>\r\n            <article class='card'>\r\n              <a href='' class='card__link link'>\r\n                <div class='card-img-container'>\r\n                  <img\r\n                    src='https://image.tmdb.org/t/p/w500${movieInfo.poster_path}'\r\n                    alt='${movieInfo.title}'\r\n                    data-id='${movieInfo.id}'\r\n                    class='card__image'\r\n                  />\r\n                </div>\r\n\r\n                <div class='card__description'>\r\n                  <div class='card-name__container'>\r\n                    <h2 class='card__name'>${movieInfo.title}</h2>\r\n                  </div>\r\n                  <p class='card__info'>${movieInfo.genres[0].name}, ${movieInfo.genres[1].name}, other | ${releaseDate}\r\n                    <span class='card__movie-rating'>${movieInfo.vote_average}</span>\r\n                  </p>\r\n                </div>\r\n              </a>\r\n            </article>\r\n          </li>`,\r\n            );\r\n          } else if ((movieInfo.genres.length = 2)) {\r\n            refs.gallery.insertAdjacentHTML(\r\n              'beforeend',\r\n              `\r\n          \r\n          <li class='wow animate__fadeInUp card__item list' data-id='${movieInfo.id}' id='${movieInfo.id}' title='${movieInfo.title}'>\r\n            <article class='card'>\r\n              <a href='' class='card__link link'>\r\n                <div class='card-img-container'>\r\n                  <img\r\n                    src='https://image.tmdb.org/t/p/w500${movieInfo.poster_path}'\r\n                    alt='${movieInfo.title}'\r\n                    data-id='${movieInfo.id}'\r\n                    class='card__image'\r\n                  />\r\n                </div>\r\n\r\n                <div class='card__description'>\r\n                  <div class='card-name__container'>\r\n                    <h2 class='card__name'>${movieInfo.title}</h2>\r\n                  </div>\r\n                  <p class='card__info'>${movieInfo.genres[0].name}, other | ${releaseDate}\r\n                    <span class='card__movie-rating'>${movieInfo.vote_average}</span>\r\n                  </p>\r\n                </div>\r\n              </a>\r\n            </article>\r\n          </li>`,\r\n            );\r\n          } else if ((movieInfo.genres.length = 1)) {\r\n            refs.gallery.insertAdjacentHTML(\r\n              'beforeend',\r\n              `\r\n          \r\n          <li class='wow animate__fadeInUp card__item list' data-id='${movieInfo.id}' id='${movieInfo.id}' title='${movieInfo.title}'>\r\n            <article class='card'>\r\n              <a href='' class='card__link link'>\r\n                <div class='card-img-container'>\r\n                  <img\r\n                    src='https://image.tmdb.org/t/p/w500${movieInfo.poster_path}'\r\n                    alt='${movieInfo.title}'\r\n                    data-id='${movieInfo.id}'\r\n                    class='card__image'\r\n                  />\r\n                </div>\r\n\r\n                <div class='card__description'>\r\n                  <div class='card-name__container'>\r\n                    <h2 class='card__name'>${movieInfo.title}</h2>\r\n                  </div>\r\n                  <p class='card__info'>${movieInfo.genres[0].name} | ${releaseDate}\r\n                    <span class='card__movie-rating'>${movieInfo.vote_average}</span>\r\n                  </p>\r\n                </div>\r\n              </a>\r\n            </article>\r\n          </li>`,\r\n            );\r\n          }\r\n\r\n          return movieInfo;\r\n        }),\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nfunction clearGallery() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n"]}